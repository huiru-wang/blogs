---
title: 区块链共识机制
category: web3
tags:
  - blockchain
publishedAt: 2023-10-21
description: 区块链的共识机制
---


![](/images/web3-fundation-consensus.png)

Blockchain is A Deterministic System. (确定性的系统)

1. 创建并发起一笔交易；这笔交易在网络中传播，最终到达1个或多个全节点上；
2. 每个全节点独立地验证、执行这笔交易：检查签名、检查余额；（如果交易涉及智能合约，则执行相应的合约代码）
3. 全节点广播验证完成的交易；与此同时，全节点也在挑选交易执行区块打包（交易费的高低）
4. 多数的全节点会发布自己打包的区块由其他节点验，等待接收，其中被更多节点接受的区块会成为最长链，多数节点会以此链向后继续打包交易，最终达到整个区块链的交易状态一致性；

  

# 共识机制
## POW

合法的区块是通过矿工的计算工作来确定的。矿工需要找到一个满足特定难度目标的哈希值

这个计算过程是非常困难和资源密集型的。当一个矿工找到这个符合要求的哈希值并广播该区块后，其他节点会收到这个区块。其他节点会验证这个区块中的交易是否合法（如检查交易签名是否正确、交易是否符合区块链的规则等），同时验证这个区块的哈希值是否满足难度要求。如果这些条件都满足，其他节点就会接受这个区块，将其添加到自己的区块链副本中

## POS

验证者被选中的概率与他们所抵押的权益（加密货币数量）有关；

验证者打包的区块同样需要经过其他节点的验证。其他节点会检查区块中的交易合法性、验证者的签名是否正确等内容。如果验证通过，这个区块就会被认为是合法的；

在 PoS 系统中，通常有惩罚机制。如果验证者试图打包包含非法交易或者恶意操作的区块，他们抵押的权益将会受到损失，以此来保证区块的合法性


# 最长链原则

  
  

# 零知识证明